<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">scripts/experiment-properties/graphing/d3-custom-plots/estimation_plot.js | vcl-web-framework</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<script src="./inject/script/0-conditions-config.js"></script><script src="./inject/script/0-experiments-config.js"></script><script src="./inject/script/0-graphing-config.js"></script><script src="./inject/script/0-trial-structure-config.js"></script><script src="./inject/script/0-balancing-config.js"></script><script src="./inject/script/0-view-controller.js"></script><script src="./inject/script/0-experiments-renderer.js"></script><script src="./inject/script/0-conditions-renderer.js"></script><script src="./inject/script/0-supported-properties-renderer.js"></script><link rel="stylesheet" href="./inject/css/0-styles.css"><meta name="description" content="This is a Node.js application that runs correlation-related experiments of the VCL Lab."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="vcl-web-framework"><meta property="twitter:description" content="This is a Node.js application that runs correlation-related experiments of the VCL Lab."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/UBC-VCL/VCLWebFramework.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-balancing">experiment-properties/balancing</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-balance_subconditions">balance_subconditions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-balancing-balancing-helpers">experiment-properties/balancing/balancing_helpers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_index_array">generate_index_array</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_any_array">get_any_array</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_any_array_repeated">get_any_array_repeated</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_permutation">get_permutation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_remaining_elements">get_remaining_elements</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-heapsPermute">heapsPermute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reorder">reorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-shuffle">shuffle</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-balancing-generators">experiment-properties/balancing/generators</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-initialize_blocked_latin_square">initialize_blocked_latin_square</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-innitialize_custom_latin_square">innitialize_custom_latin_square</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_counter_balanced_order">generate_counter_balanced_order</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-innitialize_custom_order">innitialize_custom_order</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-initialize_latin_square">initialize_latin_square</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-initialize_random_order">initialize_random_order</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-counter">experiment-properties/counter</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-print_curr_trial">print_curr_trial</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-data">experiment-properties/data</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_custom_subcondition">get_custom_subcondition</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_condition_dataset">create_condition_dataset</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_design_condition_dataset">create_design_condition_dataset</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_data">get_data</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_data_subset">get_data_subset</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CUSTOM_TRIAL_STRUCTURE_CONDITIONS">CUSTOM_TRIAL_STRUCTURE_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EXPERIMENT_BASES">EXPERIMENT_BASES</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EXPERIMENT_CONDITIONS">EXPERIMENT_CONDITIONS</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-data-constants">experiment-properties/data/constants</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENSEMBLE_AVERAGE_BASE">ENSEMBLE_AVERAGE_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENSEMBLE_AVERAGE_CONDITIONS">ENSEMBLE_AVERAGE_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ESTIMATION_CONDITIONS">ESTIMATION_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HYBRID_BASE">HYBRID_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HYBRID_CONDITIONS">HYBRID_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-JND_BASE">JND_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-JND_CONDITIONS">JND_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-JND_RADIUS_BASE">JND_RADIUS_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-JND_RADIUS_CONDITIONS">JND_RADIUS_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUMEROSITY_BASE">NUMEROSITY_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUMEROSITY_CONDITIONS">NUMEROSITY_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_BASE">SEQUENCING_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_CONDITIONS">SEQUENCING_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_SIDE_BY_SIDE_BASE">SEQUENCING_SIDE_BY_SIDE_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_SIDE_BY_SIDE_CONDITIONS">SEQUENCING_SIDE_BY_SIDE_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_SYMBOLS_BASE">SEQUENCING_SYMBOLS_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEQUENCING_SYMBOLS_CONDITIONS">SEQUENCING_SYMBOLS_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-STEVENS_BASE">STEVENS_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-STEVENS_CONDITIONS">STEVENS_CONDITIONS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-VISUAL_SEARCH_BASE">VISUAL_SEARCH_BASE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-VISUAL_SEARCH_CONDITIONS">VISUAL_SEARCH_CONDITIONS</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-distribution">experiment-properties/distribution</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_adjusted_distribution">generate_adjusted_distribution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_initial_distribution">generate_initial_distribution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_random_distribution">generate_random_distribution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-correlationNotWithinError">correlationNotWithinError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateDistribution">generateDistribution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateRandomGaussian">generateRandomGaussian</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPearsonCorrelation">getPearsonCorrelation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pointNotWithinRequiredStdDevs">pointNotWithinRequiredStdDevs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_coordinates">prepare_coordinates</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-random_bm">random_bm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-readjustPoints">readjustPoints</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-transformPoints">transformPoints</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateRandomDistribution">generateRandomDistribution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateRandomUniform">generateRandomUniform</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateUniformDistribution">generateUniformDistribution</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-graphing">experiment-properties/graphing</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_color">generate_color</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_color_hex">generate_color_hex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-is_custom_plot">is_custom_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_custom_plot">prepare_custom_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-add_graph_features">add_graph_features</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_attributes_object">generate_attributes_object</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-plot_distributions">plot_distributions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-graphing-d3-base-plots">experiment-properties/graphing/d3-base-plots</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_parallel_plot">create_parallel_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_ring_plot">create_ring_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_scatter_plot">create_scatter_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-plot_scatter_points">plot_scatter_points</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_shape_plot">create_shape_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_strip_plot">create_strip_plot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-graphing-d3-custom-plots">experiment-properties/graphing/d3-custom-plots</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_distractor_scatter_plot">create_distractor_scatter_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_estimation_bisection_plot">create_estimation_bisection_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_estimation_interference_plot">create_estimation_interference_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_estimation_multi_interference_plot">create_estimation_multi_interference_plot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-create_estimation_plot">create_estimation_plot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-graphing-d3-plot-features">experiment-properties/graphing/d3-plot-features</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-combine_target_and_distractor">combine_target_and_distractor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-plot_mixed_attribute_graph">plot_mixed_attribute_graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_array_mix_graph">prepare_array_mix_graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_mix_graph">prepare_mix_graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_targeted_mix_graph">prepare_targeted_mix_graph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prepare_visual_mask_graph">prepare_visual_mask_graph</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-properties-instructions">experiment-properties/instructions</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_subcond_instruction_block">generate_subcond_instruction_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_instructions">get_instructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_jspsych_instructions">get_jspsych_instructions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-timeline-instruction-screen">experiment-timeline/instruction_screen</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_instructions">generate_instructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_ready_screen">generate_ready_screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_sitting_distance_screen">generate_sitting_distance_screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_welcome">generate_welcome</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-timeline-resolution-scaling">experiment-timeline/resolution_scaling</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-manual_resolution_scaling">manual_resolution_scaling</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolution_scaling">resolution_scaling</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiment-timeline-screening">experiment-timeline/screening</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningInstructions">screeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningPCPInverted">screeningPCPInverted</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-instructionsRegression">instructionsRegression</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningCorrelationSelect">screeningCorrelationSelect</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningCorrelationSort">screeningCorrelationSort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningInstructions">screeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningQuestions">screeningQuestions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningRegressionSelect">screeningRegressionSelect</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-colorScreeningInstructions">colorScreeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ignoreScreeningInstructions">ignoreScreeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-luminanceScreeningInstructions">luminanceScreeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-orientationScreeningInstructions">orientationScreeningInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screeningStripColorYellowBlue">screeningStripColorYellowBlue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screenningStripLuminanceSort">screenningStripLuminanceSort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-screenningStripOrientationSort">screenningStripOrientationSort</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-ensemble-average">experiments/ensemble_average</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/ensemble_average/ensemble_average.js~Ensemble_Average.html">Ensemble_Average</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ensemble_avg_exp">ensemble_avg_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-estimation">experiments/estimation</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/estimation/estimation.js~Estimation.html">Estimation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-estimation_exp">estimation_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-hybrid">experiments/hybrid</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/hybrid/hybrid.js~Hybrid.html">Hybrid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hybrid_exp">hybrid_exp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jnd_exp">jnd_exp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-stevens_exp">stevens_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-jnd">experiments/jnd</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/jnd/jnd.js~JND.html">JND</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_experiment_block">generate_experiment_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_experiment_end">generate_experiment_end</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_feedback_screen">generate_feedback_screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_practice_block">generate_practice_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_ready_experiment">generate_ready_experiment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_stop_block">generate_stop_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jnd_exp">jnd_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-jnd-radius">experiments/jnd_radius</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/jnd_radius/jnd_radius.js~JND_Radius.html">JND_Radius</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jnd_radius_exp">jnd_radius_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-numerosity">experiments/numerosity</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/numerosity/numerosity.js~Numerosity.html">Numerosity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-numerosity_exp">numerosity_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-sequencing">experiments/sequencing</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/sequencing/sequencing.js~Sequencing.html">Sequencing</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IMAGE_PATH">IMAGE_PATH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sequencing_exp">sequencing_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-sequencing-side-by-side">experiments/sequencing_side_by_side</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/sequencing_side_by_side/sequencing_side_by_side.js~Sequencing_Side_by_Side.html">Sequencing_Side_by_Side</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IMAGE_PATH">IMAGE_PATH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sequencing_side_by_side_exp">sequencing_side_by_side_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-sequencing-symbols">experiments/sequencing_symbols</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/sequencing_symbols/sequencing_symbols.js~Sequencing_Symbols.html">Sequencing_Symbols</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_experiment">generate_experiment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_experiment_end">generate_experiment_end</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_feedback_screen">generate_feedback_screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_feedback_wrapper">generate_feedback_wrapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_practice_block">generate_practice_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_practice_instruction_block">generate_practice_instruction_block</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_stop_practice_trials">generate_stop_practice_trials</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RECTANGLE_MASK_PATH">RECTANGLE_MASK_PATH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SQUARE_MASK_PATH">SQUARE_MASK_PATH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sequencing_symbols_exp">sequencing_symbols_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-stevens">experiments/stevens</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/stevens/stevens.js~Stevens.html">Stevens</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-stevens_exp">stevens_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#experiments-visual-search">experiments/visual_search</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/experiments/visual_search/visual_search_timeline.js~Visual_Search.html">Visual_Search</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_color_paths">get_color_paths</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-hex_to_color">hex_to_color</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-visual_search_exp">visual_search_exp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#helpers">helpers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/scripts/helpers/correlation_dependencies.js~Correlation_Dependencies.html">Correlation_Dependencies</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-above_and_below_generate_random_trial_array">above_and_below_generate_random_trial_array</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-bundle_z_values">bundle_z_values</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-check_params">check_params</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-force_greater_right_position">force_greater_right_position</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_feature_search_trials">generate_feature_search_trials</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate_timeline_screen">generate_timeline_screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-genereate_hybrid_instruction">genereate_hybrid_instruction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getScreenHeight">getScreenHeight</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_mixed_graph_styles">get_mixed_graph_styles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_mixed_masks">get_mixed_masks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_num_blocks">get_num_blocks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_running_average">get_running_average</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_single_graph_style">get_single_graph_style</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get_single_mask">get_single_mask</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-is_converged_in_window">is_converged_in_window</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nova_variables">nova_variables</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randomize_graph_attributes_mixed">randomize_graph_attributes_mixed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randomize_position">randomize_position</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randomize_position_symmetric">randomize_position_symmetric</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randomize_radius_position">randomize_radius_position</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-repeat_y_values">repeat_y_values</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-shuffleArray">shuffleArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-correlation_dependencies">correlation_dependencies</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">scripts/experiment-properties/graphing/d3-custom-plots/estimation_plot.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">export {create_estimation_plot, 
        create_estimation_interference_plot, 
        create_estimation_multi_interference_plot,
        create_estimation_bisection_plot};
    
var exp;

/**
 * Plots a regular estimation condition
 *
 * @param {object} experiment
 *        {object} attributes
 */
function create_estimation_plot(experiment, attributes) {

    exp = experiment;

    let chart = d3.select(&quot;#graph&quot;)
        .append(&quot;svg&quot;)
        .attr(&quot;width&quot;, attributes.chart.width)
        .attr(&quot;height&quot;, attributes.chart.height)
        .attr(&quot;style&quot;, &quot;display: block&quot;);

    let left = attributes.left_shape;
    let right = attributes.right_shape;

    plot_shape(left.shape, chart, left.size, left.y, left.x, left.is_ref, left.outline, left.fill, left.options);
    plot_shape(right.shape, chart, right.size, right.y, right.x, right.is_ref, right.outline, right.fill, right.options);

    if (experiment.condition_name === &quot;absolute_area_ratio&quot;){
        plot_text(chart, &quot;The target area ratio is &quot; + attributes.chart.target_area_ratio + &quot;.&quot;)
    }
}

/**
 * Plots a bisection estimation condition
 * (e.g. conditions with &quot;bisection&quot; in their name)
 *
 * @param {object} experiment
 *        {object} attributes
 */
function create_estimation_bisection_plot(experiment, attributes) {

    exp = experiment;

    let chart = d3.select(&quot;#graph&quot;)
        .append(&quot;svg&quot;)
        .attr(&quot;width&quot;, attributes.chart.width)
        .attr(&quot;height&quot;, attributes.chart.height)
        .attr(&quot;style&quot;, &quot;display: block&quot;);

    let left = attributes.left_shape;
    let right = attributes.right_shape;
    let middle = attributes.middle_shape;

    plot_shape(left.shape, chart, left.size, left.y, left.x, left.is_ref, left.outline, left.fill, left.options);
    plot_shape(middle.shape, chart, middle.size, middle.y, middle.x, middle.is_ref, middle.outline, middle.fill, middle.options);
    plot_shape(right.shape, chart, right.size, right.y, right.x, right.is_ref, right.outline, right.fill, right.options);
}

/**
 * Plots an interference estimation condition 
 * (e.g. conditions with &quot;interference&quot; in their name but are not multi)
 *
 * @param {object} experiment
 *        {object} attributes
 */
function create_estimation_interference_plot(experiment, attributes) {

    exp = experiment;

    let chart = d3.select(&quot;#graph&quot;)
    .append(&quot;svg&quot;)
    .attr(&quot;width&quot;, attributes.chart.width)
    .attr(&quot;height&quot;, attributes.chart.height)
    .attr(&quot;style&quot;, &quot;display: block&quot;);

    let left = attributes.left_shape;
    let right = attributes.right_shape;
    let interf = attributes.interf_shape;

    // Plot interference shape
    if (interf) {
        plot_shape(interf.shape, chart, interf.size, interf.y, interf.x, interf.is_ref, interf.outline, interf.fill, interf.options);
    }

    // Plot main shapes
    plot_shape(left.shape, chart, left.size, left.y, left.x, left.is_ref, left.outline, left.fill, left.options);
    plot_shape(right.shape, chart, right.size, right.y, right.x, right.is_ref, right.outline, right.fill, right.options);
}

/**
 * Plots a multi interference estimation condition 
 * (e.g. conditions with &quot;interference&quot; and &quot;multi&quot; in their name)
 *
 * @param {object} experiment
 *        {object} attributes
 */
function create_estimation_multi_interference_plot(experiment, attributes) {

    exp = experiment;

    let chart = d3.select(&quot;#graph&quot;)
    .append(&quot;svg&quot;)
    .attr(&quot;width&quot;, attributes.chart.width)
    .attr(&quot;height&quot;, attributes.chart.height)
    .attr(&quot;style&quot;, &quot;display: block&quot;);

    let left = attributes.left_shape;
    let right = attributes.right_shape;
    let ref_sub = attributes.ref_sub_shape;
    let mod = attributes.mod_shape;

    // These conditions need main to go first as the sub+mod are on top
    if (experiment.condition_name.split(&quot;_&quot;).includes(&quot;fan&quot;) || 
        experiment.condition_name === &quot;multi_square_cutout_interference&quot; ||
        experiment.condition_name === &quot;multi_square_cutout_interference_flicker&quot;) {

        // Plot main shapes
        plot_shape(left.shape, chart, left.size, left.y, left.x, left.is_ref, left.outline, left.fill, left.options);
        plot_shape(right.shape, chart, right.size, right.y, right.x, right.is_ref, right.outline, right.fill, right.options);

        // Plot ref sub shape
        plot_shape(ref_sub.shape, chart, ref_sub.size, ref_sub.y, ref_sub.x, ref_sub.is_ref, ref_sub.outline, ref_sub.fill, ref_sub.options);

        // Plot mod shape
        plot_shape(mod.shape, chart, mod.size, mod.y, mod.x, mod.is_ref, mod.outline, mod.fill, mod.options);

    } else {

        // Plot ref sub shape
        plot_shape(ref_sub.shape, chart, ref_sub.size, ref_sub.y, ref_sub.x, ref_sub.is_ref, ref_sub.outline, ref_sub.fill, ref_sub.options);

        // Plot mod shape
        plot_shape(mod.shape, chart, mod.size, mod.y, mod.x, mod.is_ref, mod.outline, mod.fill, mod.options);

        // Plot main shapes
        plot_shape(left.shape, chart, left.size, left.y, left.x, left.is_ref, left.outline, left.fill, left.options);
        plot_shape(right.shape, chart, right.size, right.y, right.x, right.is_ref, right.outline, right.fill, right.options);
    }
}

/**
 * Routes to correct plotting code depending on shape type.
 *
 * @param shape {string}
 * @param chart {object}
 * @param length {number} 
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean} if the shape is a reference shape or a modifiable shape
 * @param outline {string} outline color
 * @param fill {string} fill color
 * @param options {string} can be: {&quot;scaling&quot;: &quot;scales_with_mod&quot;   This shape serves as bg to the modifiable shape
                                                OR 
                                               &quot;scales_indep&quot;      This shape is a bg shape, but is the one being modified
                                               },

                                   {&quot;fan-attributes&quot;: {&quot;slice-alignment&quot;         : &quot;top&quot; or &quot;bottom&quot;,   Position of slice in pie
                                                       &quot;angle-size&quot;              : some_value,          Angle in degrees of the fan
                                                      },          

                                   {&quot;flicker&quot;: {&quot;on&quot;: on_duration,    The duration in ms for the shape to appear
                                                &quot;off&quot;: off_duration}} The duration in ms for the shape to disappear
 */
function plot_shape(shape, chart, length, y_pos, x_pos, is_ref, outline, fill, options) {
    switch (shape) {
        case &quot;circle&quot;:
            plot_circle(chart, length, y_pos, x_pos, is_ref, outline, fill, options);
            break;
        case &quot;fan&quot;:

            // When mod_side_alignment = slice-bottom, reference circle must have a sliced out
            // section equivalent to modifiable fan. Here we just plot another fan over the 
            // reference circle.
            if (options[&quot;fan-attributes&quot;][&quot;ref_shape_adjusts&quot;]) {
                plot_fan(chart, length, y_pos-length/4, x_pos, is_ref, fill, fill, options);
            }

            plot_fan(chart, length, y_pos, x_pos, is_ref, outline, fill, options);

            break;
        case &quot;triangle&quot;:
            plot_triangle(chart, length, y_pos, x_pos, is_ref, outline, fill, options);
            break;
        case &quot;square&quot;:
            plot_square(chart, length, y_pos, x_pos, is_ref, outline, fill, options);
            break;
        case &quot;line&quot;:
            plot_line(chart, length, y_pos, x_pos, is_ref, outline, options);
            break;
        case &quot;rectangle&quot;:
            plot_rectangle(chart, length, y_pos, x_pos, is_ref, outline, fill, options);
            break;
        default:
            throw Error(shape + &quot; shape is not supported.&quot;);
    }
}

/**
 * Plots a circle.
 *
 * @param chart {object}
 * @param diameter {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean} if the shape is a reference shape or a modifiable shape
 * @param outline {string}
 * @param fill {string}
 * @param options {string}
 */
function plot_circle(chart, diameter, y_pos, x_pos, is_ref, outline, fill, options) {

    let radius = diameter / 2;
    let shape = chart.append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, x_pos)
                        .attr(&quot;cy&quot;, y_pos)
                        .attr(&quot;r&quot;, diameter / 2)
                        .attr(&quot;id&quot;, function(){
                            if (options &amp;&amp; options.scaling &amp;&amp; options.scaling === &quot;scales_with_mod&quot;) {
                                exp.interf_shape_variables = {x_pos: x_pos, y_pos: y_pos, diameter: diameter};
                                return &quot;bound_circle_shape&quot;
                            }
                            return &quot;circle_shape&quot;}
                        )
                        .attr(&quot;is_ref&quot;, is_ref)
                        .attr(&quot;fill&quot;, fill)
                        .attr(&quot;stroke&quot;, outline);
    if (is_ref === false) {
        d3.select(&quot;body&quot;)
            .on(&quot;keydown&quot;, function () {
                let event = d3.event;
                // console.log(event);
                if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                    diameter = calculate_size_change(event.key, diameter, &quot;circle&quot;);
                    radius = diameter / 2;
                    d3.select(&quot;#circle_shape&quot;)
                        .attr(&quot;r&quot;, radius);
                }
            });
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, fill, outline, options.flicker.on, options.flicker.off);
    }
}

/**
 * Plots a fan.
 *
 * @param chart {object}
 * @param width {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean} if the shape is a reference shape or a modifiable shape,
 *                         is_ref === true if the shape is a reference shape
 * @param outline {string}
 * @param fill {string}
 * @param options {object}
 */
function plot_fan(chart, diameter, y_pos, x_pos, is_ref, outline, fill, options) {

    if (!options[&quot;fan-attributes&quot;]) {throw Error(&quot;Fan attributes are needed in options to plot a fan.&quot;)};

    let radius = diameter/2;
    let angle_size = options[&quot;fan-attributes&quot;][&quot;angle_size&quot;];

    let arc = d3.arc()
                .innerRadius(0)
                .outerRadius(radius)
                .startAngle(0 * Math.PI/180)
                .endAngle(function(){
                    return angle_size * Math.PI/180;
                });

    let shape = chart.append(&quot;g&quot;)
                     .attr(&quot;transform&quot;, function() {
                        return &quot;translate(&quot; + x_pos + &quot;,&quot; + y_pos + &quot;)&quot;;
                      }) 
                     .append(&quot;path&quot;)
                     .attr(&quot;id&quot;, function(){
                        if (is_ref) {
                            return &quot;fan_shape_ref&quot;;
                        } else {
                            return &quot;fan_shape_mod&quot;;
                        }
                      })
                     .attr(&quot;d&quot;, arc)
                     .attr(&quot;fill&quot;, fill)
                     .attr(&quot;stroke&quot;, outline)
                     .attr(&quot;stroke-width&quot;, 1)
                     .attr(&quot;transform&quot;, &quot;rotate(&quot; + compute_angle_shift(angle_size, options[&quot;fan-attributes&quot;][&quot;slice-alignment&quot;]) + &quot;)&quot;);
        
    if (is_ref === false) {
        d3.select(&quot;body&quot;)
          .on(&quot;keydown&quot;, function () {
                let event = d3.event;
                if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                    // Estimated size = angle units
                    angle_size = calculate_angle_change(event.key, angle_size, radius);

                    let changed_arc = d3.arc()
                                        .innerRadius(0)
                                        .outerRadius(radius)
                                        .startAngle(0 * Math.PI/180)
                                        .endAngle(function(){
                                            return angle_size * Math.PI/180;
                                        });

                    d3.selectAll(&quot;#fan_shape_mod&quot;)
                        .attr(&quot;d&quot;, changed_arc)
                        .attr(&quot;transform&quot;, &quot;rotate(&quot; + compute_angle_shift(angle_size, options[&quot;fan-attributes&quot;][&quot;slice-alignment&quot;]) + &quot;)&quot;);
                }
        });
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, fill, outline, options.flicker.on, options.flicker.off);
    }
}

/**
 * Returns the amount of rotational shift in degrees to align the angle 
 * at the desired alignment.
 *  
 * @param {double}   angle - size of angle in degrees
 *        {string}   alignment - e.g. bottom or top of circle
 */
function compute_angle_shift(angle, alignment) {

    let shift = (-1)*angle/2; // Shifts it so slice is perfectly centered and at top of pie

    if (alignment === &quot;bottom&quot;) {
        shift += 180;
    } else if (alignment !== &quot;top&quot;) {
        throw Error(alignment + &quot; alignment not supported in computing angle shift for fan shapes.&quot;);
    }

    return shift;
}

/**
 * On conditions square,circle interference and circle interference, will trigger
 * the underlying bound bg shape to scale with the mod shape
 *  
 * @param {double}     size_change
 */
function adjust_interference_shape(size_change) {
    let subcond = exp.curr_conditions_constants[exp.curr_condition_index];
    let ratio = subcond.interf_ratio;

    let y_translation;
    let x_translation;

    if (subcond.interf_shape) {

        switch (subcond.interf_shape) {

            case &quot;circle&quot; :

                d3.select(&quot;#bound_circle_shape&quot;)
                  .attr(&quot;r&quot;, size_change * ratio)
                break;

            case &quot;square&quot; :

                x_translation = exp.interf_shape_variables.x_pos - ((size_change * ratio) / 2);
                y_translation = exp.interf_shape_variables.y_pos - ((size_change * ratio) / 2);

                d3.select(&quot;#bound_square_shape&quot;)
                  .attr(&quot;width&quot;, (size_change * ratio))
                  .attr(&quot;height&quot;, (size_change * ratio))
                  .attr(&quot;x&quot;, x_translation)
                  .attr(&quot;y&quot;, y_translation);
                break;
        }
    }
}

/**
 * Plots a square.
 *
 * @param chart {object}
 * @param width {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean} if the shape is a reference shape or a modifiable shape,
 *                         is_ref === true if the shape is a reference shape
 * @param outline {string}
 * @param fill {string}
 * @param options {object}
 */
function plot_square(chart, width, y_pos, x_pos, is_ref, outline, fill, options) {

    let subcond = exp.curr_conditions_constants[exp.curr_condition_index];

    let shape;

    if (options &amp;&amp; options.cutout_radius) {

        let cutout = options.cutout_radius;

        // Need to shift by half length to match centering done by regular rect svgs
        x_pos -= width/2;
        y_pos -= width/2;

        let poly = [{&quot;x&quot;:(x_pos+cutout), &quot;y&quot;:(y_pos)}, //bottom left of cutout
                    {&quot;x&quot;:(x_pos+cutout), &quot;y&quot;:(y_pos+cutout)}, //bottom right of cutout
                    {&quot;x&quot;:(x_pos), &quot;y&quot;:(y_pos+cutout)}, //top right of cutout

                    {&quot;x&quot;:(x_pos), &quot;y&quot;:(y_pos+width)}, //bottom left corner
                    {&quot;x&quot;:(x_pos + width), &quot;y&quot;:(y_pos + width)}, //bottom right corner
                    {&quot;x&quot;:(x_pos + width), &quot;y&quot;:(y_pos)}, //top right corner
                    ];

        shape = chart.append(&quot;polygon&quot;)
                        .attr(&quot;points&quot;,function() {
                            return poly.map(function(d) { return [d.x, d.y].join(&quot;,&quot;); }).join(&quot; &quot;);})
                        .attr(&quot;fill&quot;, fill)
                        .attr(&quot;stroke&quot;, outline)
                        .attr(&quot;id&quot;, is_ref? &quot;square_cutout_shape_ref&quot; : &quot;square_cutout_shape_mod&quot;);

    } else {

        shape = chart.append(&quot;rect&quot;)
                        .attr(&quot;id&quot;, function(){
                            if (options &amp;&amp; options.scaling &amp;&amp; options.scaling === &quot;scales_with_mod&quot;) {
                                exp.interf_shape_variables = {x_pos: x_pos, y_pos: y_pos, width: width};
                                return &quot;bound_square_shape&quot;;
                            }

                            if (is_ref) {
                                return &quot;square_shape_ref&quot;;
                            } else {
                                return &quot;square_shape_mod&quot;; // if is an interf and is not ref, becomes a mod
                            }
                        })
                        .attr(&quot;x&quot;, x_pos - width / 2)
                        .attr(&quot;y&quot;, y_pos - width / 2) // the x and y core_attributes for square
                                                      // refers to the position of the upper left corner
                                                      // however x_pos and y_pos specifies the center of the shape
                        .attr(&quot;width&quot;, width)
                        .attr(&quot;height&quot;, width)
                        .attr(&quot;fill&quot;, fill)
                        .attr(&quot;stroke&quot;, outline);

        if (is_ref === true &amp;&amp; exp.curr_trial_data.ref_rotate_by) {
            let transform = &quot;rotate(&quot;;
            transform = transform + exp.curr_trial_data.ref_rotate_by.toString();
            transform = transform + &quot; &quot; + (x_pos - width).toString();
            transform = transform + &quot; &quot; + (y_pos - width).toString();
            transform = transform + &quot;)&quot;;
            d3.select(&quot;#square_shape_ref&quot;).attr(&quot;transform&quot;, transform);
        }
        if (is_ref === false) {
            d3.select(&quot;body&quot;)
                .on(&quot;keydown&quot;, () =&gt; {
                    let event = d3.event;
                    if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                        width = calculate_size_change(event.key, width, &quot;square&quot;);
                        d3.select(&quot;#square_shape_mod&quot;)
                            .attr(&quot;width&quot;, width)
                            .attr(&quot;height&quot;, width);

                        // Need to adjust translation for when adjustable
                        // interf is overlapping.
                        if (options &amp;&amp; options.scaling &amp;&amp; options.scaling === &quot;scales_indep&quot;){

                            let x_translation;
                            let y_translation;

                            // If interf is larger than ref
                            if (subcond.mod_ratio &gt; 1) {
                                x_translation = x_pos - ((width * subcond.mod_ratio) / 4);
                                y_translation = y_pos - ((width * subcond.mod_ratio) / 4);
                            } else { // If interf is smaller than ref (so behind + center of ref)

                                x_translation = x_pos - ((width * subcond.mod_ratio));
                                y_translation = y_pos - ((width * subcond.mod_ratio));
                            }
                            
                            d3.select(&quot;#square_shape_mod&quot;)
                                .attr(&quot;x&quot;, x_translation)
                                .attr(&quot;y&quot;, y_translation);
                        }
                        
                    }
                });
        }
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, fill, outline, options.flicker.on, options.flicker.off);
    }

}

/**
 * Plots a triangle. 
 *
 * @param chart {object}
 * @param radius {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean} if the shape is a reference shape or a modifiable shape,
 *                         is_ref === true if the shape is a reference shape
 * @param outline {string}
 * @param fill {string}
 * @param options {object}
 */
function plot_triangle(chart, radius, y_pos, x_pos, is_ref, outline, fill, options) {

    // for equilateral triangles, height = side * sqrt(3) / 2;
    let short_side = radius;
    let long_side = radius;
    let height = 0, width = 0;

    let poly = [];
    if (!is_ref) {
        if (exp.curr_trial_data.width_height_ratio) {
            long_side = short_side * exp.curr_trial_data.width_height_ratio;
            height = Math.sqrt(Math.pow(long_side, 2) - Math.pow(short_side / 2, 2));
            width = short_side;
            if (exp.curr_trial_data.mod_rotate_by) {
                poly = [
                    {&quot;x&quot;:(0.5 * height + x_pos), &quot;y&quot;:(y_pos)},
                    {&quot;x&quot;:(-0.5 * height + x_pos), &quot;y&quot;:(-0.5 * width + y_pos)},
                    {&quot;x&quot;:(-0.5 * height + x_pos), &quot;y&quot;:(0.5 * width + y_pos)}];
            } else {
                poly = [
                    {&quot;x&quot;:(x_pos), &quot;y&quot;:(-0.5 * height + y_pos)},
                    {&quot;x&quot;:(-0.5 * width + x_pos), &quot;y&quot;:(0.5 * height + y_pos)},
                    {&quot;x&quot;:(0.5 * width + x_pos), &quot;y&quot;:(0.5 * height + y_pos)}];
            }
        } else {
            height = radius * Math.sqrt(3)/2;
            poly = [
                {&quot;x&quot;:x_pos, &quot;y&quot;:(-0.5 * height + y_pos)},
                {&quot;x&quot;:(-0.5 * radius + x_pos), &quot;y&quot;:(0.5 * height + y_pos)},
                {&quot;x&quot;:(0.5 * radius + x_pos), &quot;y&quot;:(0.5 * height + y_pos)}];
        }
    } else {
        height = radius * Math.sqrt(3)/2;
        poly = [
            {&quot;x&quot;:x_pos, &quot;y&quot;:(-0.5 * height + y_pos)},
            {&quot;x&quot;:(-0.5 * radius + x_pos), &quot;y&quot;:(0.5 * height + y_pos)},
            {&quot;x&quot;:(0.5 * radius + x_pos), &quot;y&quot;:(0.5 * height + y_pos)}];
    }

    let shape = chart.append(&quot;polygon&quot;)
                        .attr(&quot;points&quot;,function() {
                            return poly.map(function(d) { return [d.x, d.y].join(&quot;,&quot;); }).join(&quot; &quot;);})
                        .attr(&quot;fill&quot;, fill)
                        .attr(&quot;stroke&quot;, outline)
                        .attr(&quot;id&quot;, is_ref? &quot;triangle_shape_ref&quot; : &quot;triangle_shape_mod&quot;);

    if (is_ref === false) {
        d3.select(&quot;body&quot;)
            .on(&quot;keydown&quot;, function () {
                let event = d3.event;
                if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                    // decide the amount of change;
                    radius = calculate_size_change(event.key, radius, &quot;triangle&quot;);
                    // plot the changed shape
                    short_side = radius;
                    if (exp.curr_trial_data.width_height_ratio) {
                        long_side = short_side * exp.curr_trial_data.width_height_ratio;
                        height = Math.sqrt(Math.pow(long_side, 2) - Math.pow(short_side / 2, 2));
                        width = short_side;
                        if (exp.curr_trial_data.mod_rotate_by) {
                            poly = [
                                {&quot;x&quot;:(0.5 * height + x_pos), &quot;y&quot;:(y_pos)},
                                {&quot;x&quot;:(-0.5 * height + x_pos), &quot;y&quot;:(-0.5 * width + y_pos)},
                                {&quot;x&quot;:(-0.5 * height + x_pos), &quot;y&quot;:(0.5 * width + y_pos)}];
                        } else {
                            poly = [
                                {&quot;x&quot;:(x_pos), &quot;y&quot;:(-0.5 * height + y_pos)},
                                {&quot;x&quot;:(-0.5 * width + x_pos), &quot;y&quot;:(0.5 * height + y_pos)},
                                {&quot;x&quot;:(0.5 * width + x_pos), &quot;y&quot;:(0.5 * height + y_pos)}];
                        }
                    } else {
                        height = short_side * Math.sqrt(3)/2;
                        poly = [
                            {&quot;x&quot;:x_pos, &quot;y&quot;:(-0.5 * height + y_pos)},
                            {&quot;x&quot;:(-0.5 * short_side + x_pos), &quot;y&quot;:(0.5 * height + y_pos)},
                            {&quot;x&quot;:(0.5 * short_side + x_pos), &quot;y&quot;:(0.5 * height + y_pos)}];
                    }

                   chart.select(&quot;#triangle_shape_mod&quot;)
                        .attr(&quot;points&quot;,function() {
                            return poly.map(function(d) { return [d.x, d.y].join(&quot;,&quot;); }).join(&quot; &quot;);});

                   adjust_interference_shape(radius);

                }
            });
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, fill, outline, options.flicker.on, options.flicker.off);
    }
}

/**
 * Plots a rectangle.
 *
 * @param chart {object}
 * @param size {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean}
 * @param outline {string}
 * @param fill {string}
 * @param options {object}
 */
function plot_rectangle(chart, size, y_pos, x_pos, is_ref, outline, fill, options) {
    let short_side = size;
    let long_side = size;
    let height = 0, width = 0;
    if (exp.curr_trial_data.width_height_ratio) {
        long_side = short_side * exp.curr_trial_data.width_height_ratio;
    }
    width = short_side;
    height = long_side;
    let shape = chart.append(&quot;rect&quot;)
                    .attr(&quot;id&quot;, is_ref? &quot;rect_shape_ref&quot;: &quot;rect_shape_mod&quot;)
                    .attr(&quot;x&quot;, x_pos - width / 2)
                    .attr(&quot;y&quot;, y_pos - height / 2) // the x and y core_attributes for square
                    // refers to the position of the upper left corner
                    // however x_pos and y_pos specifies the center of the shape
                    .attr(&quot;width&quot;, width)
                    .attr(&quot;height&quot;, height)
                    .attr(&quot;fill&quot;, fill)
        .attr(&quot;stroke&quot;, outline);
    if (is_ref === false &amp;&amp; exp.curr_trial_data.mod_rotate_by) {
        let transform = &quot;rotate(&quot;;
        transform = transform + exp.curr_trial_data.mod_rotate_by.toString();
        transform = transform + &quot; &quot; + (x_pos).toString();
        transform = transform + &quot; &quot; + (y_pos).toString();
        transform = transform + &quot;)&quot;;
        console.log(transform);
        d3.select(&quot;#rect_shape_mod&quot;).attr(&quot;transform&quot;, transform);
    }

    if (is_ref === false) {
        d3.select(&quot;body&quot;)
            .on(&quot;keydown&quot;, function () {
                let event = d3.event;
                if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                    size = calculate_size_change(event.key, size, &quot;rectangle&quot;);
                    let short_side = size;
                    let long_side = exp.curr_trial_data.width_height_ratio * short_side;
                    let new_width = 0, new_height = 0;
                    new_width = short_side;
                    new_height = long_side;
                    d3.select(&quot;#rect_shape_mod&quot;)
                        .attr(&quot;width&quot;, new_width)
                        .attr(&quot;height&quot;, new_height);
                }
            });
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, fill, outline, options.flicker.on, options.flicker.off);
    }

}

/**
 * Plots a line.
 *
 * @param chart {object}
 * @param width {number}
 * @param y_pos {number}
 * @param x_pos {number}
 * @param is_ref {boolean}
 * @param outline
 * @param options {object}
 */
function plot_line(chart, width, y_pos, x_pos, is_ref, outline, options) {

    let x1, x2, y1, y2;
    if (!is_ref) {
        x1 = x_pos - (width / 2) * Math.sin(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
        x2 = x_pos + (width / 2) * Math.sin(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
        y1 = y_pos - (width / 2) * Math.cos(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
        y2 = y_pos + (width / 2) * Math.cos(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
    } else {
        x1 = x_pos - width / 2;
        x2 = x_pos + width / 2;
        y1 = y_pos;
        y2 = y_pos;
    }
    let shape = chart.append(&quot;line&quot;)
                        .style(&quot;stroke&quot;, outline)
                        .style(&quot;stroke-width&quot;, exp.curr_trial_data.stroke_width)
                        .attr(&quot;id&quot;, is_ref? &quot;line_shape_ref&quot;: &quot;line_shape_mod&quot;)
                        .attr(&quot;x1&quot;, x1)
                        .attr(&quot;x2&quot;, x2)
                        .attr(&quot;y1&quot;, y1)
                        .attr(&quot;y2&quot;, y2);
    if (is_ref === false) {
        d3.select(&quot;body&quot;)
            .on(&quot;keydown&quot;, function () {
                let event = d3.event;
                if (event.key === &quot;m&quot; || event.key === &quot;z&quot;) {
                    width = calculate_size_change(event.key, width, &quot;line&quot;);
                    if (!is_ref) {
                        x1 = x_pos - (width / 2) * Math.sin(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
                        x2 = x_pos + (width / 2) * Math.sin(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
                        y1 = y_pos - (width / 2) * Math.cos(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
                        y2 = y_pos + (width / 2) * Math.cos(exp.curr_trial_data.mod_rotate_by * Math.PI / 180);
                    } else {
                        x1 = x_pos - width / 2;
                        x2 = x_pos + width / 2;
                        y1 = y_pos;
                        y2 = y_pos;
                    }
                    d3.select(&quot;#line_shape_mod&quot;)
                        .attr(&quot;x1&quot;, x1)
                        .attr(&quot;x2&quot;, x2)
                        .attr(&quot;y1&quot;, y1)
                        .attr(&quot;y2&quot;, y2);
                }
            });
    }

    if (options &amp;&amp; options.flicker) {
        shape.call(flicker_shape, &quot;none&quot;, outline, options.flicker.on, options.flicker.off);
    }
}

/**
 * Plots text centered at the bottom of the page. 
 *
 * @param chart {object}
 *        text  {string}
 */
function plot_text(chart, text){

    chart.append(&quot;text&quot;)
        .attr(&quot;x&quot;, &quot;50%&quot;)
        .attr(&quot;y&quot;, &quot;95%&quot;)
        .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
        .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)
        .attr(&quot;font-size&quot;, &quot;28px&quot;)
        .attr(&quot;fill&quot;, &quot;black&quot;)
        .text(()=&gt;{
            return text;
        });
}

/**
 * Flickers on and off the D3 selection.
 *
 * @param {object} selection
 *        {string} fill
 *        {string} stroke
 *        {double} on_duration - duration selection displays for in ms
 *        {double} off_duration - duration selection becomes invisible for in ms
 */
function flicker_shape(selection, fill, stroke, on_duration, off_duration) {

    setInterval(display_off, on_duration);
    setInterval(display_on, on_duration + off_duration);

    function display_off() {
        selection.attr(&quot;fill&quot;, &quot;none&quot;)
                 .attr(&quot;stroke&quot;, &quot;WHITE&quot;);
    }

    function display_on() {
        selection.attr(&quot;fill&quot;, fill)
                 .attr(&quot;stroke&quot;, stroke);
    }
}

/**
 * Calculates the next size and saves the data.
 *
 * @param {object}  event_key  m to increase the size and z to decrease the size
 * @param {double}  size the previous size of the shape
 * @param {string}  the type of shape
 *
 * @returns {number}  the new size in pixels
 */
function calculate_size_change(event_key, size, shape_type) {

    let sign = event_key === &quot;m&quot; ? 1 : -1;
    let change = Math.random() * exp.PIXEL_TO_CM * exp.MAX_STEP_SIZE;
    let new_radius = size + sign * change;
    let size_in_px = new_radius;
    let size_in_cm = new_radius / exp.PIXEL_TO_CM;

    exp.save_adjustment(change * sign / exp.PIXEL_TO_CM);
    exp.save_estimated_size(size_in_cm, &quot;cm&quot;);

    let area = exp.compute_shape_area(shape_type, size_in_px);
    exp.save_estimated_area(area);

    return size_in_px;
}

/**
 * Calculates the next angle and saves the data.
 *
 * @param {object}  event_key  m to increase the size and z to decrease the size
 * @param {double}  previous angle
 * @param {double}  radius of the fan
 *
 * @returns {number}  the new angle in degrees
 */
function calculate_angle_change(event_key, angle, radius) {

    let current_constants = exp.curr_conditions_constants[exp.curr_condition_index];
    let max_step_size = current_constants.max_step_size;

    let sign = event_key === &quot;m&quot; ? 1 : -1;
    let change = Math.random() * max_step_size;
    let diff_angle = sign * change;

    let new_angle = angle + diff_angle;

    exp.save_adjustment(diff_angle);
    exp.save_estimated_size(new_angle, &quot;angle&quot;);

    let area = exp.compute_fan_area(new_angle, radius);
    exp.save_estimated_area(area);

    return new_angle;
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
